<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Table Viewer</title>
    <link rel="stylesheet" href="t6.css">
</head>

<body>

    <h1>Image Table Viewer</h1>
    <input type="file" id="csvInput" accept=".csv">
    <table id="imageTable">
        <thead>
            <tr>
                <th>Image</th>
                <th>Download</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        document.getElementById('csvInput').addEventListener('change', handleFileUpload);

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type === 'text/csv') {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const csvContent = e.target.result;
                    const rows = csvContent.split('\n');
                    populateTable(rows);
                };
                reader.readAsText(file);
            } else {
                alert('Please upload a valid CSV file.');
            }
        }

        function populateTable(rows) {
            const tableBody = document.querySelector('#imageTable tbody');
            tableBody.innerHTML = ''; // Clear existing rows
            rows.forEach(row => {
                const url = row.trim();
                if (url) {
                    const tr = document.createElement('tr');

                    // Image cell
                    const imgCell = document.createElement('td');
                    const img = document.createElement('img');
                    img.src = url;
                    img.onerror = () => (img.src = 'https://via.placeholder.com/100?text=Image+Not+Found');
                    imgCell.appendChild(img);
                    tr.appendChild(imgCell);

                    // Download button cell
                    const downloadCell = document.createElement('td');
                    const downloadButton = document.createElement('button');
                    downloadButton.textContent = 'Download';
                    downloadButton.className = 'download-btn';
                    downloadButton.onclick = () => downloadImage(url);
                    downloadCell.appendChild(downloadButton);
                    tr.appendChild(downloadCell);

                    tableBody.appendChild(tr);
                }
            });
        }

        function downloadImage(url) {
            const anchor = document.createElement('a');
            anchor.href = url;
            anchor.download = 'image';
            anchor.target = '_blank';
            anchor.click();
        }
    </script>

</body>

</html>